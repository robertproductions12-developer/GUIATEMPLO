<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Church Maps - GPS Integration</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0b011d;
            --neon-yellow: #f3ff00;
            --neon-pink: #ff00e5;
            --neon-purple: #9d00ff;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg-dark); color: white; display: flex; justify-content: center; min-height: 100vh; overflow: hidden; }

        .app-shell {
            width: 100%; max-width: 414px; height: 100vh;
            background: radial-gradient(circle at 0% 0%, #1a0b2e 0%, #0b011d 100%);
            display: flex; flex-direction: column; position: relative; overflow: hidden;
            border: 1px solid var(--glass-border);
        }

        /* --- VISTAS --- */
        .view { display: none; flex-direction: column; height: 100%; width: 100%; position: absolute; top: 0; left: 0; }
        .view.active { display: flex; }

        header { padding: 30px 20px 10px; background: rgba(11, 1, 29, 0.8); backdrop-filter: blur(10px); z-index: 10; }
        h1 { font-family: 'Rajdhani', sans-serif; font-size: 24px; font-style: italic; text-transform: uppercase; letter-spacing: 2px; }
        h1 span { color: var(--neon-yellow); text-shadow: 0 0 15px rgba(243, 255, 0, 0.6); }

        /* --- LISTA DE DIRECCIONES --- */
        .address-list { flex: 1; padding: 20px; overflow-y: auto; padding-bottom: 100px; }
        .card {
            background: var(--glass); border: 1px solid var(--glass-border); border-radius: 20px;
            padding: 15px; margin-bottom: 15px; display: flex; align-items: center; cursor: pointer;
        }
        .card-content h3 { font-size: 15px; margin-bottom: 4px; color: var(--neon-yellow); }
        .card-content p { font-size: 11px; color: #aaa; }

        /* --- FORMULARIO ADMIN --- */
        .admin-content { padding: 20px; overflow-y: auto; flex: 1; padding-bottom: 100px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-size: 10px; text-transform: uppercase; color: var(--neon-purple); margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select {
            width: 100%; background: #1a0b2e; border: 1px solid var(--glass-border);
            border-radius: 10px; padding: 12px; color: white; outline: none;
        }
        .form-group input:focus { border-color: var(--neon-pink); }
        .btn-submit {
            width: 100%; background: var(--neon-pink); color: white; padding: 15px; border: none;
            border-radius: 12px; font-weight: bold; text-transform: uppercase; cursor: pointer;
        }

        /* --- MODAL DETALLE --- */
        .modal {
            position: absolute; bottom: -100%; left: 0; width: 100%; background: #160a2b;
            border-top: 3px solid var(--neon-yellow); border-radius: 30px 30px 0 0;
            padding: 30px; transition: 0.4s; z-index: 100; box-shadow: 0 -10px 40px rgba(0,0,0,0.8);
        }
        .modal.active { bottom: 0; }
        .btn-gps {
            display: block; width: 100%; background: var(--neon-yellow); color: black;
            text-align: center; padding: 15px; border-radius: 12px; font-weight: bold;
            text-decoration: none; text-transform: uppercase; margin: 20px 0 10px;
        }

        /* --- NAVBAR --- */
        nav {
            position: absolute; bottom: 0; width: 100%; background: rgba(11, 1, 29, 0.95);
            padding: 15px; display: flex; justify-content: space-around; border-top: 1px solid var(--glass-border);
        }
        .nav-btn { background: none; border: none; color: #666; font-size: 10px; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        .nav-btn.active { color: var(--neon-yellow); }
    </style>
</head>
<body>

    <div class="app-shell">
        
        <!-- VISTA USUARIO -->
        <div id="userView" class="view active">
            <header>
                <h1>CHURCH <span>MAPS</span></h1>
                <p style="font-size: 10px; color: #888;">Toca una sede para ver la ruta GPS</p>
            </header>
            <div class="address-list" id="churchList"></div>
        </div>

        <!-- VISTA ADMIN -->
        <div id="adminView" class="view">
            <header>
                <h1>NUEVA <span>SEDE</span></h1>
            </header>
            <div class="admin-content">
                <form id="addChurchForm">
                    <div class="form-group">
                        <label>Nombre del Lugar</label>
                        <input type="text" id="cName" placeholder="Ej: Iglesia Central" required>
                    </div>
                    <div class="form-group">
                        <label>Dirección Escrita</label>
                        <input type="text" id="cAddr" placeholder="Ciudad, Barrio, Calle..." required>
                    </div>
                    <div class="form-group">
                        <label>Link de Google Maps (URL)</label>
                        <input type="url" id="cMapLink" placeholder="Pegue aquí el link de 'Compartir' de Maps" required>
                        <small style="color: #666; font-size: 9px; margin-top: 5px; display: block;">
                            * Vaya a Google Maps, busque el lugar, toque 'Compartir' y 'Copiar enlace'.
                        </small>
                    </div>
                    <button type="submit" class="btn-submit">GUARDAR EN EL BANCO</button>
                </form>
            </div>
        </div>

        <!-- MODAL DETALLE -->
        <div class="modal" id="detailModal">
            <h2 id="m-title" style="color: var(--neon-yellow);"></h2>
            <p id="m-desc" style="font-size: 13px; color: #aaa; margin-top: 5px;"></p>
            
            <a href="#" id="m-gps-link" target="_blank" class="btn-gps">ABRIR EN GOOGLE MAPS</a>
            
            <button onclick="closeModal()" style="width: 100%; background: none; border: none; color: #666; font-size: 12px; cursor: pointer; padding: 10px;">CERRAR</button>
        </div>

        <nav>
            <button class="nav-btn active" onclick="switchView('user', this)">Explorar</button>
            <button class="nav-btn" onclick="switchView('admin', this)">Agregar</button>
        </nav>
    </div>

    <script>
        // Base de Datos Inicial (con links de ejemplo)
        let churches = [
            { 
                name: "Sede Central Alpha", 
                addr: "Av. Principal 123, Ciudad Capital", 
                link: "https://www.google.com/maps/search/?api=1&query=Iglesia+Catedral" 
            },
            { 
                name: "Misión Vida Norte", 
                addr: "Calle Bosque Nro 45, Sector Norte", 
                link: "https://maps.app.goo.gl/uX9K9m9vX9K9" 
            }
        ];

        function renderList() {
            const container = document.getElementById('churchList');
            container.innerHTML = '';
            churches.forEach((c, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => openModal(c);
                card.innerHTML = `
                    <div style="min-width: 45px; height: 45px; background: var(--glass); border: 1px solid var(--neon-purple); border-radius: 12px; margin-right: 15px; display: flex; align-items: center; justify-content: center;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--neon-yellow)" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                    </div>
                    <div class="card-content">
                        <h3>${c.name}</h3>
                        <p>${c.addr}</p>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // Abrir Modal con Link Real
        function openModal(church) {
            document.getElementById('m-title').innerText = church.name;
            document.getElementById('m-desc').innerText = church.addr;
            document.getElementById('m-gps-link').href = church.link; // Aquí se asigna el link de Google Maps
            document.getElementById('detailModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('detailModal').classList.remove('active');
        }

        // Lógica del Formulario Admin
        document.getElementById('addChurchForm').onsubmit = (e) => {
            e.preventDefault();
            const newChurch = {
                name: document.getElementById('cName').value,
                addr: document.getElementById('cAddr').value,
                link: document.getElementById('cMapLink').value
            };
            churches.unshift(newChurch);
            renderList();
            e.target.reset();
            switchView('user', document.querySelectorAll('.nav-btn')[0]);
            alert("¡Ubicación guardada con éxito!");
        };

        function switchView(view, btn) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(view + 'View').classList.add('active');
            btn.classList.add('active');
        }

        renderList();
    </script>
</body>
</html>
